What are these files?
=====================

prepend-init.rc
---------------

It is prepended to init.rc to execute a shell script to set up MultiROM.
It should work for Android init >= 4.1

It starts a service and wait for a file which indicates the setup is ready.

Android 4.1 init does not support timeout in the wait command, so in order to
keep compatibility, a wait command with a large timeout and two with no timeout
are supplied (two for a total of 10 seconds).


setup.sh
--------

This script hosts some simple helper functions.

// TODO: document more about them

The script must be set to exit on error, and it should trap the EXIT signal to
perform a set of operaions to minimize the chance of data corruption caused by
any bugs:

 - Force the internal emmc into read-only mode
 - Execute `/multirom/reboot recovery`
 
Interestingly, on the Xperia M stock ROM, it seems that the touch firmware
reflash process blocks the reboot process. Once it's started, it prevents
reboot until it succeeds or fails, so there is really nothing we can do but
wait.


setup-gen.sh
------------

This script is generated by MultiROM (thus isn't here). You can refer to
`multirom_main.c` for details on how it is generated.

